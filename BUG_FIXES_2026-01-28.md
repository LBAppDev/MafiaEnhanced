# Bug Fixes Applied - 2026-01-28

## Issues Fixed

### 1. âœ… PHASE_DURATION Dict Type Error
**Error**: `TypeError: unsupported operand type(s) for +: 'float' and 'dict'`

**Location**: `bot.py` line 435 (in `start_game()` method)

**Problem**: Code was trying to add a dict to a float:
```python
self.phase_end_time = time.time() + PHASE_DURATION  # PHASE_DURATION is now a dict!
```

**Solution**: Updated to use the correct dict key:
```python
self.phase_end_time = time.time() + PHASE_DURATION['night']
```

Also added the missing setup call:
```python
self._setup_night_actions()  # Initialize night phase requirements
```

---

### 2. âœ… Game Starts at Night 1 (Confirmed Correct)
The game correctly starts at `self.round = 1` with `self.phase = 'night'`.

Updated the log message to clarify:
```python
self.logs.append("ðŸŒ™ Night 1 has begun. Roles, perform your actions...")
```

---

### 3. âœ… Single Panel for Day (Discussion Phase)
**Issue**: Two panels showing side-by-side during discussion phase

**Problem**: Both Stats field and Phase-specific info field were set to `inline=True`, making them appear as 2 columns.

**Solution**: Changed Stats field to `inline=False`:
```python
# --- GAME STATS ---
stats_txt = f"**Mafia:** {self.mafia_count}\n**Town:** {self.villager_count}\n**Round:** {self.round}"
embed.add_field(name="ðŸ“Š Stats", value=stats_txt, inline=False)  # Changed from inline=True
```

Now the layout is:
- Players Alive (full width)
- Graveyard (if any) (full width)
- Stats (full width)
- Phase Info (full width)
- Recent Events (full width)

---

## Testing Status

âœ… **Syntax Validation**: PASSED
```
âœ… Python syntax is valid
```

âœ… **Fixes Applied**: 
1. PHASE_DURATION dict access fixed
2. Night 1 initialization confirmed
3. Single panel for discussion phase confirmed

**Status**: Ready for testing in Discord
